---
layout:     post
title:      OpenBLAS学习笔记
subtitle:    
date:       2021-10-08
author:     ChenWH
header-img: img/the-first.png
catalog:   true
tags:

    - Note
---

# OpenBLAS

## 安装配置

```shell
# 下载源码
git clone git@github.com:xianyi/OpenBLAS.git
# 编译
cd OpenBLAS
make -j12 # 这里j后面的数字是cpu线程数
# 安装
sudo make PREFIX=/opt/OpenBLAS install # 选择安装路径
```

## 路径配置

```shell
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/opt/OpenBLAS/lib
export LIBRARY_PATH=$LIBRARY_PATH:/opt/OpenBLAS/lib
export C_INCLUDE_PATH=$C_INCLUDE_PATH:/opt/OpenBLAS/include
export CPLUS_INCLUDE_PATH=$CPLUS_INCLUDE_PATH:/opt/OpenBLAS/include
```

## 测试运行

```c
#include <cblas.h>
#include <stdio.h>

void main() {

    int i = 0;
    double A[6] = {1.0,2.0,1.0,-3.0,4.0,-1.0};         
    double B[6] = {1.0,2.0,1.0,-3.0,4.0,-1.0};  
    double C[9] = {.5,.5,.5,.5,.5,.5,.5,.5,.5}; 

    int M = 3; // row of A and C
    int N = 3; // col of B and C
    int K = 2; // col of A and row of B

    double alpha = 1.0;
    double beta = 0.0;

    cblas_dgemm(CblasRowMajor, CblasNoTrans, CblasNoTrans, M, N, K, alpha, A, K, B, N, beta, C, N);

    for (i = 0; i < 9; i++) {
        printf("%lf ", C[i]);
    }
    printf("\n");
}
```

```shell
g++ test.cpp -o test -lopenblas
```

